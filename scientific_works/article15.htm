<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Выявление с помощью нагрузочного тестирования и устранение узких мест в работе с базами данных</title>
  <link rel="stylesheet" href="../css/style.css">
</head>
<body class="lynch-body">

<!-- Контент -->
<main class="container lynch-main">
  <!-- Кнопка назад -->
  <div class="article-button">
    <a href="index.htm" class="back-link">← Назад в библиотеку</a>
  </div>

  <!-- Статья -->
  <div class="individual-block">
        <div class="article-annotation">
      <p><strong>Источник: </strong><a href="https://www.elibrary.ru/item.asp?id=80650453">https://www.elibrary.ru/item.asp?id=80650453</a></p>
    </div>
    <p style="text-align: left;">УДК 004</p>
    <!-- Заголовок статьи -->
    <div class="article-title">
      <strong>Глушкова О.О.</strong>
    <!-- Авторы и аффилиации -->
    <div class="article-author">
      <p>магистр кафедры информационных технологий и вычислительных систем Московский государственный технологический университет «Станкин» (г. Москва, Россия)</p>
    </div>
      <h1>
        ВЫЯВЛЕНИЕ С ПОМОЩЬЮ НАГРУЗОЧНОГО  ТЕСТИРОВАНИЯ И УСТРАНЕНИЕ УЗКИХ  МЕСТ В РАБОТЕ С БАЗАМИ ДАННЫХ
      </h1>
    </div>



    <!-- Аннотация -->
    <div class="article-annotation">
      <h3>Аннотация</h3>
      <p>
        <strong>статья посвящена анализу типичных проблем, возникающих при эксплуатации СУБД: от некорректной индексации и неэффективных запросов до дисбаланса в распределенных системах. Рассматриваются практические методы их решения, включая оптимизацию структуры запросов, выбор подходящих типов индексов, внедрение гибридного кэширования и динамического шардинга. Особое внимание уделяется важности нагрузочного тестирования для выявления скрытых узких мест, а также роли регулярного мониторинга метрик производительности. На примерах показано, как сочетание технических решений и грамотной настройки позволяет снизить задержки, минимизировать ошибки и повысить отказоустойчивость систем. </strong>
      </p>
      <p><strong>Ключевые слова:</strong> перегрузка БД, нагрузочное тестирование, оптимизация запросов, кэширование, балансировка нагрузки, асинхронная обработка. </p>
    </div>

    <!-- Содержание статьи -->
    <div class="article-content">
      <!-- Основной текст статьи -->
      <p>Рост объема данных в эпоху цифровой трансформации ставит перед компаниями сложные задачи по обеспечению производительности баз данных. Практически все сферы бизнеса и производства переходят на цифровые технологии, что приводит к значительному увеличению количества транзакций, запросов и операций с информацией. В результате перед организациями встает сложная и очень важная задача — обеспечить высокую производительность и стабильность работы баз данных, которые являются основой информационных систем. Особенно остро эта проблема проявляется в периоды пиковой нагрузки, когда количество запросов к базе данных резко возрастает, и система должна справляться с большим потоком информации без сбоев и задержек. Согласно последним исследованиям, более 65% российских компаний сталкиваются с деградацией работы своих информационных систем именно в такие моменты, и в 78% случаев причиной ухудшения производительности становится именно система управления базами данных [1]. Это говорит о том, что оптимизация и правильное управление СУБД — ключевой фактор успеха для любой организации, стремящейся к стабильной работе своих сервисов и удовлетворению потребностей клиентов. </p>
      <p>В последние годы в России наблюдается тенденция к переходу на отечественные аналоги зарубежных систем управления базами данных, такие как Postgres Pro или YDB. Это связано с политическими и экономическими факторами, а также с необходимостью импортозамещения, что стало особенно актуально в условиях меняющейся геополитической ситуации [1]. Однако такой переход не всегда проходит гладко и без проблем. Использование новых систем требует глубокой адаптации и оптимизации, так как архитектура и особенности работы отечественных СУБД могут существенно отличаться от привычных зарубежных решений. В частности, компании сталкиваются с необходимостью перенастройки индексов, переработки запросов и адаптации архитектуры распределённых систем. Без тщательного анализа и тестирования производительности такие изменения могут привести к ещё большим проблемам, чем те, что были до перехода, и даже вызвать серьёзные сбои в работе бизнес-приложений. </p>
      <p>В этом контексте нагрузочное тестирование становится незаменимым инструментом, который позволяет выявить узкие места в работе СУБД, проявляющиеся только при высокой нагрузке [5]. Среди наиболее распространённых проблем, которые выявляются в ходе таких тестов, — некорректная индексация, дисбаланс в распределённых системах и неэффективные запросы, которые существенно замедляют работу базы данных и увеличивают время отклика приложений. Например, некорректная индексация может привести к тому, что время выборки данных увеличивается в десятки раз, что негативно сказывается на общей производительности и пользовательском опыте [3]. Дисбаланс в распределённых системах, таких как Cassandra или ClickHouse, когда большая часть запросов приходится на ограниченное число узлов, приводит к увеличению задержек и снижению отказоустойчивости, что в конечном итоге отражается на стабильности работы всей системы [2].</p>
      <p>Одной из наиболее частых проблем, выявляемых в ходе нагрузочного тестирования, являются избыточные N+1 запросы, характерные для ORMсистем. ORМ (Object-Relational Mapping) — это технология, позволяющая разработчикам работать с базой данных через объекты, что упрощает разработку и повышает удобство программирования, но иногда приводит к неэффективным запросам [4]. В частности, в Django-приложениях автоматическая генерация запросов к связанным моделям может привести к экспоненциальному росту нагрузки на базу данных. Вместо одного сложного запроса система выполняет множество мелких, что значительно увеличивает время обработки и нагрузку на сервер. Исследования показывают, что замена таких запросов на использование JOIN позволяет снизить среднее время выполнения операций с 420 миллисекунд до 55 миллисекунд, а количество ошибок — с 540 до 12 в час [4]. Это существенное улучшение, которое напрямую влияет на стабильность и отзывчивость приложений, а также на качество обслуживания конечных пользователей.</p>
      <p>Для моделирования нагрузки и проведения тестов широко используются инструменты вроде JMeter и k6. Они позволяют создавать параметризованные сценарии, которые имитируют реальные паттерны доступа к базе данных, включая авторизацию, работу с сессиями и Cookies [5]. С их помощью можно создавать сценарии, способные генерировать до 50 000 запросов в секунду, что позволяет проверить систему в условиях экстремальной нагрузки и выявить потенциальные проблемы, которые не проявляются при обычной эксплуатации. Однако эффективность таких тестов напрямую зависит от точности настройки. Статические тесты, которые не учитывают реальные паттерны доступа, выявляют на 35% меньше проблем по сравнению с динамическими сценариями, которые строятся на основе анализа реального поведения пользователей и бизнес-логики [5].</p>
      <p>Одной из ключевых проблем, влияющих на производительность, является некорректная индексация. Особенно это актуально для таблиц с объёмом данных свыше 10 миллионов записей, что характерно для крупных проектов и систем с большим количеством пользователей. Анализ производительности PostgreSQL показывает, что отсутствие индексов увеличивает время выборки данных в 15 раз — с 45 миллисекунд до 650 миллисекунд [3]. При этом выбор типа индекса имеет большое значение. Например, B-деревья оптимальны для диапазонных запросов и позволяют снизить задержку на 85%, а хеш-индексы ускоряют точечный поиск на 120% [3]. </p>
      <p>Оптимизация структуры запросов является основой повышения производительности баз данных. Замена N+1 запросов на JOIN сокращает время выполнения операций на 85%, а использование оконных функций вместо вложенных подзапросов позволяет снизить нагрузку ещё на 40% [4]. Как видно из Таблицы 1, эти методы не только ускоряют обработку данных, но и значительно снижают количество ошибок. Например, замена N+1 запросов на JOIN уменьшает количество ошибок с 540 до 12 в час, что критически важно для высоконагруженных систем.</p>
      <p>Для таблиц с большим объёмом данных (свыше 10 млн записей) ключевую роль играет выбор типа индексов. B-деревья оптимальны для диапазонных запросов, сокращая задержку на 85%, а хеш-индексы ускоряют точечный поиск на 120%, но требуют осторожного применения из-за замедления операций вставки [3]. </p>
      <p>В распределённых системах, таких как Cassandra, внедрение 
динамического шардинга позволяет снизить дисбаланс нагрузки между узлами с 
70% до 10%, что подтверждается исследованиями (Таблица 1) [2]. Это не только 
улучшает отказоустойчивость, но и сокращает задержку 99-го перцентиля до 
приемлемых значений. </p>

      <!-- Таблицы -->
      <table border="1">
    <caption>Таблица 1. Сравнение методов оптимизации производительности СУБД.</caption>
    <tr>
        <th>Метод оптимизации</th>
        <th>Влияние на время выполнения</th>
        <th>Снижение количества ошибок</th>
        <th>Источник</th>
    </tr>
    <tr>
        <td>Замена N+1 запросов на JOIN</td>
        <td>Сокращение с 420 мс до 55 мс (85%)</td>
        <td>С 540 до 12 ошибок/час</td>
        <td>[4]</td>
    </tr>
    <tr>
        <td>Использование B-деревьев</td>
        <td>Снижение задержки на 85%</td>
        <td>Не применимо</td>
        <td>[3]</td>
    </tr>
    <tr>
        <td>Хеш-индексы</td>
        <td>Ускорение поиска на 120%<br>Замедление вставки в 2.5 р.</td>
        <td>Не применимо</td>
        <td>[3]</td>
    </tr>
    <tr>
        <td>Динамический шардинг</td>
        <td>Снижение дисбаланса до 10%</td>
        <td>Снижение нагрузки CPU до 45%</td>
        <td>[2]</td>
    </tr>
    <tr>
        <td>Гибридное кэширование</td>
        <td>Задержка P99: 95 мс (с 2500)</td>
        <td>Уменьшение ошибок на 70%</td>
        <td>[5]</td>
    </tr>
</table>
    
    <p>Гибридные стратегии кэширования, такие как комбинация Redis и 
встроенного кэша СУБД, демонстрируют высокую эффективность. При нагрузке 
в 15 000 запросов в секунду hit rate достигает 96%, а задержка 99-го перцентиля 
снижается с 2500 миллисекунд до 95 миллисекунд, что существенно улучшает 
пользовательский опыт. Однако стоит учитывать, что стоимость 
инфраструктуры при использовании гибридного кэширования возрастает 
примерно на 25% по сравнению с использованием только встроенного кэша. 
Кэширование результатов агрегаций, например, среднего чека заказов, 
уменьшает нагрузку на CPU на 70%, но требует частой инвалидации при 
изменении данных, что добавляет сложности в поддержке и требует 
дополнительного внимания со стороны разработчиков и администраторов. </p>
<p>Для оценки производительности баз данных используются несколько 
ключевых метрик. Среди них throughput, или пропускная способность, которая 
показывает количество успешных запросов в секунду; P95 и P99 latency — 
задержка для 95% и 99% запросов соответственно, что позволяет оценить 
качество обслуживания большинства пользователей [5].</p>
<p>Регулярное проведение нагрузочного тестирования является обязательным условием поддержания стабильности баз данных. Например, ежеквартальные тесты в крупном интернет-магазине позволили сократить количество инцидентов с деградацией производительности на 65% [5].</p>
<p>Балансировка нагрузки в распределённых системах требует не только 
алгоритмических решений, но и инфраструктурных изменений. Использование 
Kubernetes для автоматического масштабирования кластеров Cassandra снизило 
время восстановления после сбоев с 15 минут до 2 минут, что значительно 
повысило отказоустойчивость и скорость реакции на инциденты. Однако такие 
решения увеличивают сложность администрирования — 35% компаний 
отмечают рост затрат на DevOps-ресурсы, что требует дополнительного 
планирования и инвестиций в квалифицированный персонал. </p>
<p>Нагрузочное тестирование нельзя рассматривать как единоразовое 
действие — оно требует регулярного проведения в рамках жизненного цикла 
создания и поддержки ИТ-систем. Устойчивая работа современных решений 
достигается за счет комплексного подхода, включающего непрерывный 
мониторинг ключевых показателей эффективности. Этот принцип 
подтверждается опытом российских организаций, где внедрение таких практик 
позволило обеспечить стабильность и высокую производительность 
инфраструктуры [1].</p>

      <h2>СПИСОК ЛИТЕРАТУРЫ: </h2>
      <ol>
        <li>Хождение по мукам: Импортозамещение СУБД в высоконагруженных системах. — Diasoft [Электронный ресурс]. — URL: https://w.diasoft.ru/about/publications/21615/ (дата обращения: 10.04.2025);</li>
<li>Локшин М.В., Рыков С.А. Параллельное исполнение SQL-запроса в системах с использованием репликации и секционирования отношения— Вестник Воронежского государственного технического университета, 2015;</li>
<li>A Practical Guide to PostgreSQL Indexes. — Percona [Электронный ресурс]. — URL: https://w.percona.com/blog/a-practical-guide-to-postgresql-indexes/ (дата обращения: 26.03.2025);</li>
<li>Решение проблемы N+1 запроса без увеличения потребления памяти в Laravel— Habr [Электронный ресурс]. — URL: https://habr.com/ru/articles/508544/ (дата обращения: 01.04.2025);</li>
<li>Load Testing Best Practices— BlazeMeter [Электронный ресурс]. — URL: https://w.blazemeter.com/blog/load-testing-best-practices (дата обращения: 12.03.2025).</li>
      </ol>
      
      <!-- Английская версия аннотации -->
          <div class="article-title">
      <strong>Glushkova O.O. </strong>
    <!-- Авторы и аффилиации -->
    <div class="article-author">
      <p>Master of the Department of Information Technologies and Computing Systems Moscow State Technological University "Stankin" (Moscow, Russia)</p>
    </div>
      <h1>
        IDENTIFYING AND REMOVING DATABASE BOTTLEPOINTS WITH LOAD TESTING
      </h1>
    </div>

        <div class="article-annotation">
      <h3>Abstract</h3>
      <p>
        <strong>article is devoted to the analysis of typical problems that arise during the operation of DBMS: from incorrect indexing and inefficient queries to imbalance in distributed systems. Practical methods for their solution are considered, including optimization of the query structure, selection of appropriate index types, implementation of hybrid caching and dynamic sharding. Particular attention is paid to the importance of load testing for identifying hidden bottlenecks, as well as the role of regular monitoring of performance metrics. Examples show how a combination of technical solutions and proper configuration can reduce delays, minimize errors and increase fault tolerance of systems.</strong>
      </p>
      <p><strong>Keywords:</strong> database overload, load testing, query optimization, caching, load balancing, asynchronous processing. </p>
    </div>

    </div>
  </div>
</main>

<!-- Подвал -->
<footer class="footer lynch-footer">
  <div class="container">
    <nav class="bottom-menu">
      <a href="../diss/index.html">Реферат</a>
      <a href="../science.html">Научные труды</a>
      <a href="../ind/index.html">Индивидуальный раздел</a>
    </nav>
  </div>
</footer>

<!-- Кнопка наверх -->
<button id="toTop">↑</button>

<script>
  const toTop = document.getElementById("toTop");
  window.addEventListener("scroll", () => {
    if (window.scrollY > 300) {
      toTop.classList.add("show");
    } else {
      toTop.classList.remove("show");
    }
  });
  toTop.addEventListener("click", () => {
    window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>
</body>
</html>