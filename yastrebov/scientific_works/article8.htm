<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Метрики для динамического масштабирования баз данных в облачных средах</title>
  <link rel="stylesheet" href="../css/style.css">
</head>
<body class="lynch-body">

<!-- Контент -->
<main class="container lynch-main">
  <!-- Кнопка назад -->
  <div class="article-button">
    <a href="index.htm" class="back-link">← Назад в библиотеку</a>
  </div>

  <!-- Статья -->
  <div class="individual-block">
<p style="text-align: right;">УДК 004.4</p>
    <!-- Заголовок статьи -->
    <div class="article-title">
      <h1>
        Метрики для динамического масштабирования баз данных в облачных средах
      </h1>
      <p>
        <strong>Александр Викторович Бойченко, </strong>
      </p>
          <!-- Авторы и аффилиации -->
    <div class="article-author">
      <p>к.т.н., начальник УНИР, Московский государственный университет экономики, статистики и информатики (МЭСИ)</p>
      <p>Тел.: (495) 442-60-11</p>
      <p>E-mail: ABoichenko@mesi.ru </p>
    </div>
          <p>
        <strong>Дмитрий Константинович Рогожин, </strong>
      </p>
          <!-- Авторы и аффилиации -->
    <div class="article-author">
      <p>аспирант, инженер-программист научно-образовательного центра УНИР, Московский государственный университет экономики, статистики и информатики (МЭСИ)</p>
      <p>Тел.: (495) 442-82-33</p>
      <p>E-mail: DRogojin@mesi.ru</p>
    </div>
          <p>
        <strong>Дмитрий Геннадьевич Корнеев, </strong>
      </p>
          <!-- Авторы и аффилиации -->
    <div class="article-author">
      <p>к.э.н., начальник отдела фандрайзинга УНИР, Московский государственный университет экономики, статистики и информатики (МЭСИ)</p>
      <p>Тел.: (495) 442-60-11</p>
      <p>E-mail: DKorneev@mesi.ru</p>
    </div>
    </div>


    <!-- Аннотация -->
    <div class="article-annotation">
      <p>
        <strong>В статье проводится анализ основных методов масштабирования баз данных (репликация, шардинг) и их поддержки на уровне популярных реляционных СУБД и NoSQL решений с различными моделями данных: документо-ориентированной, ключ-значение, 
поколоночной, графовой. Приводится оценка возможности современных облачных решений и модель для организации динамического масштабирования в облачной инфраструктуре. 
Выделяются группы базовых метрик, характеризующих параметры функционирования СУБД и технических средств, а также определяются цели и группы интегральных метрик, необходимых 
для реализации адаптивных алгоритмов динамического масштабирования баз данных в облачной инфраструктуре. </strong>
      </p>
      <p><strong>Ключевые слова:</strong> динамическое масштабирование, облачные 
вычисления, NoSQL, шардинг, репликация, метрики функцио
нирования БД.</p>
    </div>

        <p style="text-align: center;">
        <strong>Alexander V. Boichenko, </strong>
      </p>
          <!-- Authors and affiliations -->
    <div class="article-author">
      <p>PhD, Head of the Research Department, Moscow State University of Economics, Statistics and Informatics (MESI)</p>
      <p>Tel.: (495) 442-60-11</p>
      <p>E-mail: ABoichenko@mesi.ru </p>
    </div>
          <p style="text-align: center;">
        <strong>Dmitry K. Rogojin, </strong>
      </p>
          <!-- Authors and affiliations -->
    <div class="article-author">
      <p>Post-graduate student, Software developer, Moscow State University of Economics, Statistics and Informatics (MESI)</p>
      <p>Tel.: (495) 442-82-33</p>
      <p>E-mail: DRogojin@mesi.ru</p>
    </div>
          <p style="text-align: center;">
        <strong>Dmitry G. Korneev, </strong>
      </p>
          <!-- Authors and affiliations -->
    <div class="article-author">
      <p>PhD, Head of Fundraising Division, Moscow State University of Economics, Statistics and Informatics (MESI)</p>
      <p>Tel.: (495) 442-60-11</p>
      <p>E-mail: DKorneev@mesi.ru</p>
    </div>

    <h2>METRICS FOR DYNAMIC SCALING OF DATABASE IN CLOUDS</h2>
    <div class="article-annotation">
    <p>
      <strong>This article analyzes the main methods of scaling databases (replication, sharding) and their support at the popular relational databases and NoSQL solutions with different data models: a document-oriented, key-value, column-oriented, graph. The article provides an assessment of the capabilities of modern cloud-based solution and gives a model for the organization of dynamic scaling in the cloud infrastructure. In the article are analyzed different types of metrics and are included the basic metrics that characterize the functioning parameters and database technology, as well as sets the goals of the integral metrics, necessary for the implementation of adaptive algorithms for dynamic scaling databases in the cloud infrastructure. This article was prepared with the support of RFBR grant № 13-07-00749.</strong></p>
    <p><strong>Keywords:</strong> dynamic scaling, cloud computing, NoSQL, sharding, replication, database metrics.</p>
  </div>

    <!-- Содержание статьи -->
    <div class="article-content">
      <!-- Основной текст статьи -->
      <h2>1. Введение</h2>
      <p>В условиях постоянно изменяющейся нагрузки, характерной, в частности для решений SaaS и DBaaS, способность 
сервиса к быстрому масштабированию в облачной инфраструктуре является главным преимуществом перед классическим подходом доставки сервисов. Эта способность позволяет 
повысить отказоустойчивость, уровень доступности и производительность сервиса путем перехода от статического выделения ресурсов сервису к динамическому выделению по требованию 
в соответствии с текущей нагрузкой. [1] Рост интереса к горизонтальному масштабированию баз данных привел к появлению нового течения в хранении и обработке данных – NoSQL 
решениям, большинство из которых изначально проектировались с поддержкой устойчивости к разделению данных по сети. Классические реляционные СУБД: Oracle, MySQL, MS SQL 
Server также стремятся к поддержке устойчивости к разделению по сети в специальных «кластерных» версиях своих продуктов, жертвуя полноценными ACID транзакциями в пользу eventual consistency – «согласованность в конечном итоге» [4]. </p>
<p>В условиях предоставления инфраструктуры для программных сред по требованию, актуальными стали вопросы возможности динамического масштабирования баз данных. Под динамическим масштабированием подразумевается свойство системы программно регулировать ресурсы, не требуя оперативного вмешательства пользователя. Динамическое масштабирование позволяет снизить время реакции на инциденты, увеличить уровень доступности сервиса и, тем самым, повысить качество предоставляемых сервисов. Возможности динамического масштабирования серверов на основе набора триггеров и метрик предоставляют своим клиентам такие компании, как Amazon 
(на основе решений CloudWatch и ElasticCloud), Rackspace (на основе решений Rackspace Cloud Monitoring и Otter). Создаваемая система TIRAMOLA [10] – совместный труд греческих 
университетов National Technical University of Athens и Ionian University – позволяет динамически масштабировать некоторые NoSQL СУБД с поколоночной моделью данных. Однако, общие 
методики динамического масштабирования БД с различными 
моделями данных, основанные на комплексном анализе метрик 
функционирования БД, в настоящий момент проработаны не
достаточно. В настоящее время для масштабирования обычно 
используются метрики, основанные только на показателях 
функционирования технических устройств. Таким образом, 
разработка интегральных метрик, одновременно учитывающих параметры функционирования БД и технических средств, 
для возможности динамически выполнять масштабирование СУБД в облачной инфраструктуре является актуальной темой исследований.</p>

      <h2>2. Анализ методов масштабирования БД</h2>
      <p> Долгое время вертикальное масштабирование было основным методом повышения производительности баз данных. Но, 
зачастую, вертикальное масштабирование не решает возникших 
в БД проблем и становится неоптимальным методом, поэтому 
сегодня для повышения производительности баз данных все 
чаще используют горизонтальное масштабирование. В настоящее время среди существующих 
методов горизонтального масштабирования, имеющих поддержку в реляционных БД и NoSQL решениях, принято выделять репликацию, секционирование (партицирование) и шардинг. [2, 3] </p>
<p>Репликация – это процесс, под которым понимается копирование данных 
из одного источника на множество 
других и наоборот. Существует около 
10 видов репликации серверов баз 
данных: мульти-мастер (multi-master, master-master), мастер-подчинённый 
(master-slave), мульти-источник (multysource), мастер-подчинённый-мастер 
(master-slave-master), мульти-сервер 
(multi-server parallel query execution), сектор-подчинённый (mirror data 
partitioning) и др. [5] Несмотря на то, что репликация теоретически является 
бесконечно наращиваемым решением, 
она способна решить только проблемы 
чтения данных из БД. Увеличение 
числа серверов становится нецелесообразным, когда появляются проблемы 
с записью данных в БД. [3]</p>
<p> Секционирование (партицирование) – средство масштабирования 
многих современных реляционных баз 
данных, которое позволяет разбивать 
таблицы, индексы и индекс-таблицы 
на части, таким образом, обеспечивая 
контроль и доступ к данным объектам 
базы данных на более низком уровне. 
Каждая из этих частей объекта базы 
данных называется секцией (или 
подсекцией для составных секционированных объектов. Таблицы секционируются с использованием «ключа секционирования», набора столбцов, определяющих, в какой секции будет 
располагаться заданная запись. Более 
подробно механизмы реализации 
секционирования описаны в [6, 7]. 
Существенным минусом механизма 
секционирования применительно к 
горизонтальному масштабированию 
уровня БД является то, что секционирование не выходит за рамки одного 
сервера. То есть, полученные в результате секции объектов физически 
располагаются на том же сервере. </p>
<p>Шардинг – разделение данных на уровне ресурсов – процесс, по смыслу схожий с секционированием, однако полученные в результате разделения объекты разносятся по разным серверам БД. Принято выделять вертикальный шардинг, при котором таблица (коллекция) выносится на другой сервер целиком, и горизонтальный шардинг, при котором на разные сервера выносятся части одной таблицы (коллекции).</p> <p>Подобно процессу секционирования, при шардинге выбирается «ключ шардирования», определяющий, на каком сервере будут располагаться части данных. Логика поиска сервера, на котором располагаются необходимые данные, заимствована из алгоритма разбиения пространства ключей DHT (англ. Distributed Hash Table – «распределённая хеш-таблица»). [8] В основе этого способа разбиения лежит функция δ(k1, k2), определяющая абстрактное понятие расстояния между ключами k1 и k2.</p> <p>Каждому узлу присваивается единичный ключ, называемый его идентификатором (ID). Узел с ID in владеет всеми ключами km, для которых in – самый ближайший ID, вычисленный с помощью δ(km, in). [9] Наиболее удобным является механизм так называемого авто-шардинга (auto-sharding), при котором реализация логики процесса шардинга осуществляется средствами самой СУБД. В таком случае нет необходимости реализовывать ее самостоятельно в рамках программного кода приложения или применять сторонние решения в качестве дополнительного промежуточного слоя.</p> <p>Помимо оптимизации операций чтения – читаются данные из более узкого набора, а не из всей таблицы (коллекции) целиком, шардинг решает также проблемы записи в БД.</p>
<p>Выбор того или иного средства для обеспечения масштабирования уровня БД зависит в первую очередь от комплексного анализа состояния БД и технических средств и выявления возможной точки отказа. Зачастую, при очень высокой нагрузке, необходимо применить вышеописанные методы масштабирования в комплексе.</p> <p>Выбор какого-то конкретного метода зависит не только от поставленной задачи, но и от поддержки метода на уровне самой СУБД. В таблице 1 приведены сведения о поддержке и реализации репликации и шардинга в современных СУБД с различными моделями данных: документо-ориентированной, ключ-значение, поколоночной, графовой и реляционной.</p> <p>Поскольку механизмы секционирования не имеют прямого отношения к организации масштабируемого кластера в облачной инфраструктуре, в данной таблице и далее они не рассматриваются.</p>

    <table border="1">
        <caption>Реализации репликации и шардинга в современных СУБД</caption>
        <thead>
            <tr>
                <th>База данных</th>
                <th>Режимы репликации</th>
                <th>Механизм шардинга</th>
            </tr>
        </thead>
        <tbody>
            <tr class="category-row">
                <td colspan="3">Документо-ориентированные</td>
            </tr>
            <tr>
                <td class="db-name">MongoDB</td>
                <td>Мастер-подчиненный</td>
                <td><em>Auto-sharding</em> (на основе "осколков" (<em>Shards</em>) и "кусков" (<em>Chunks</em>)) <sup>[12]</sup></td>
            </tr>
            <tr>
                <td class="db-name">CouchDB</td>
                <td>Мульти-мастер</td>
                <td>Встроенной поддержки нет. Осуществляется сторонними решениями <sup>[11]</sup>: <em>CouchDb-Lounge, BigCouch, Gizzard</em></td>
            </tr>

            <tr class="category-row">
                <td colspan="3">Ключ-значение</td>
            </tr>
            <tr>
                <td class="db-name">Riak</td>
                <td>Мульти-мастер</td>
                <td><em>Auto-sharding</em> (на основе <em>Ring Partitions</em>)</td>
            </tr>
            <tr>
                <td class="db-name">Redis</td>
                <td>Мастер-подчиненный</td>
                <td>Встроенной поддержки нет. Осуществляется сторонними решениями <sup>[15]</sup>: <em>Redis Cluster, Twemproxy, Predis</em></td>
            </tr>

            <tr class="category-row">
                <td colspan="3">Поколоночные (Столбцовые)</td>
            </tr>
            <tr>
                <td class="db-name">HBase</td>
                <td>Мастер-подчиненный</td>
                <td><em>Auto-sharding</em> (на основе Регионов (<em>Regions</em>))</td>
            </tr>
            <tr>
                <td class="db-name">Cassandra</td>
                <td>Мульти-мастер</td>
                <td><em>Auto-sharding</em> (на основе <em>Ring Partitions</em>) <sup>[8]</sup></td>
            </tr>

            <tr class="category-row">
                <td colspan="3">Графовые</td>
            </tr>
            <tr>
                <td class="db-name">Neo4j</td>
                <td>Мастер-подчиненный</td>
                <td>Полноценной поддержки нет. Частично реализован в технологии <em>Cache Sharding</em> <sup>[18]</sup></td>
            </tr>
            <tr>
                <td class="db-name">OrientDB</td>
                <td>Мульти-мастер</td>
                <td>Нет</td>
            </tr>

            <tr class="category-row">
                <td colspan="3">Реляционные</td>
            </tr>
            <tr>
                <td class="db-name">Oracle Database</td>
                <td>Мульти-мастер, Мастер-подчиненный</td>
                <td>Только для <em>Oracle Real Application Clusters</em> <sup>[16]</sup></td>
            </tr>
            <tr>
                <td class="db-name">MySQL</td>
                <td>Мульти-мастер, Мастер-подчиненный, «Круговая» репликация</td>
                <td><em>Auto-Sharding</em> (только в версии <em>MySQL Cluster</em>) <sup>[19]</sup></td>
            </tr>
            <tr>
                <td class="db-name">MS SQL Server</td>
                <td>Мастер-подчиненный, <em>Multi-source</em></td>
                <td><em>Data-Dependent Routing</em> (для <em>MS SQL Server</em>), <em>Federation</em> (для <em>SQL Azure</em>) <sup>[13]</sup></td>
            </tr>
            <tr>
                <td class="db-name">PostgreSQL</td>
                <td>Мульти-мастер, Мастер-подчиненный</td>
                <td>Встроенной поддержки нет. Осуществляется сторонними решениями <sup>[14]</sup>: <em>PL/Proxy, HadoopDB, PgBouncer.</em></td>
            </tr>
        </tbody>
    </table>

    <p>Как видно из таблицы, большинство NoSQL решений (кроме графовых БД) обладают встроенными механизмами автоматического шардинга в базовой поставке, в отличие от реляционных БД, где шардинг доступен только в специальных версиях.</p>
<p>Такое ограничение в реляционных БД вполне логично – проектировщику БД предоставляется выбор: что важнее – полноценная поддержка транзакций в нераспределенной среде или поддержка устойчивости к разделению по сети с согласованностью в конечном итоге (ограничения теоремы CAP [17]).</p>
<p>Для графовых БД отсутствие шардинга объясняется теми же ограничениями, поскольку большинство СУБД, основанных на графовых моделях, имеют полноценную поддержку ACID транзакций подобно традиционным реляционным базам данных. [18]</p>
<p>В свою очередь, реляционные СУБД имеют более широкий диапазон выбора методов репликации, апробированных в процессе многолетнего использования реляционных БД.</p>

      <h2>3. Масштабирование в облачной инфраструктуре</h2>

      <p>Динамическое масштабирование в облачной инфраструктуре возможно благодаря использованию технологии виртуализации и предоставляемому облачной платформой открытому API.</p>
<p>Виртуализация позволяет выделять ресурсы сервису по требованию в виде порций – виртуальных машин, а открытое API позволяет это делать программными средствами. Большое распространение получила библиотека euca2ools [20], совместимая с публичным облаком Amazon AWS и приватными облаками на базе Eucalyptus и OpenStack.</p>
<p>Используя API облачной платформы напрямую или через euca2ools, клиенты могут производить запуск и остановку виртуальных машин в облаке, основываясь на собственных алгоритмах выделения ресурсов по требованию.</p>
<p>Для реализации этих возможностей проектируемая система динамического масштабирования должна содержать как минимум систему мониторинга и систему управления масштабированием, содержащую подсистемы управления виртуальными машинами и кластером СУБД (рисунок 1).</p>

      <!-- Изображения -->
      <div class="article-picture">
        <img src="images/ar8_1_batcheditor_fotor.webp" style="max-width:40%;">
        <p>Рис. 1. Модель архитектуры системы динамического масштабирования</p>
      </div>

      <p>Большинство реализованных систем динамического масштабирования используют для организации процесса масштабирования метрики, основанные на базовых показателях жизнедеятельности сервера, на котором располагается база данных: информацию о процессоре, оперативной памяти, жестком диске и сети.</p>
<p>В частности, система динамического масштабирования кластера поколоночных (столбцовых) СУБД TIRAMOLA [10] – совместная разработка греческих университетов National Technical University of Athens и Ionian University – использует в качестве основной метрики текущую загрузку процессора (CPU Usage).</p>
<p>Подсистема динамического масштабирования системы TIRAMOLA реализует следующий алгоритм. В случае, когда хотя бы для одного из серверов в кластере верно условие CPU Usage > 40%, срабатывает триггер добавления виртуальных машин в кластер. В случае, когда для всех серверов кластера справедливо условие CPU Usage < 15%, срабатывает триггер высвобождения виртуальных машин из кластера.</p>
<p>В [10] приводятся положительные результаты работы такого алгоритма для СУБД HBase, Cassandra и Riak, имеющих схожую реализацию механизмов авто-шардинга на основе Ring Partitions. Однако, на наш взгляд, базовых метрик жизнедеятельности серверов недостаточно для комплексного подхода к масштабированию БД с различными моделями данных.</p>
<p>В частности, имея в распоряжении только эти метрики, невозможно точно выяснить, какой из методов масштабирования – репликацию или шардинг – необходимо выбрать для увеличения производительности кластера СУБД. Невозможно также определить «кандидата на шардинг» – таблицу или коллекцию данных, требующую разделения по сети, и ключ шардинга.</p>
<p>Для адаптивных алгоритмов динамического масштабирования требуются более жесткие требования к системе мониторинга, соответственно, более широкий набор метрик функционирования серверов СУБД.</p>

      <h2>4. Метрики, используемые для масштабирования</h2>

      <p>Современные системы мониторинга обладают широкими возможностями для наблюдения за показателями СУБД. Многие из них предоставляют модули для мониторинга популярных БД в базовой комплектации или, в противном случае, расширение функционала через сторонние плагины. В частности, плагин mikoomi [22] для популярной системы мониторинга Zabbix поддерживает около 80 метрик для документо-ориентированной СУБД MongoDB. Такое большое количество показателей связано, в первую очередь, со сложной архитектурой любой из современных СУБД. Примерно такое же число метрик приведено в [21] для нескольких популярных реляционных СУБД.</p>
<p>В контексте статьи метрики, значения которых предоставляются непосредственно системой мониторинга, будем называть базовыми. Поскольку кластер БД, как объект мониторинга, является комплексным, получаемые метрики целесообразно разделить на логические группы. Основываясь на архитектуре работы кластера СУБД и взаимодействии с ним пользователей, можно выделить следующие группы базовых метрик, имеющие отношение к соответствующим уровням архитектуры (рисунок 2). В зависимости от используемой в БД модели данных термины исследуемых объектов несколько отличается друг от друга, поэтому в качестве обобщения далее в статье будут использованы термины реляционной модели данных.</p>
            <div class="article-picture">
        <img src="images/ar8_2_batcheditor_fotor.webp" style="max-width:40%;">
        <p> Рис. 2. Группы базовых метрик в разрезе масштабируемого кластера СУБД</p>
      </div>
<p>1. Метрики кластера (Cluster Metrics). К метрикам кластера предлагается относить показатели, характеризующие ресурсы кластера и логических групп внутри кластера, в том числе: − Общие метрики кластера: количество виртуальных машин в кластере и объем выделенных кластеру в данный момент ресурсов (количество виртуальных процессоров, объем оперативной памяти, количество и объем дисковых разделов); − Метрики групп репликации: количество групп репликации, количество серверов в каждой группе репликации, потребляемый группой репликации объем ресурсов (количество виртуальных процессоров, объем оперативной памяти, количество и объем дисковых разделов); − Метрики групп шардинга: количество групп шардинга, количество серверов в каждой группе шардинга, потребляемый группой шардинга объем ресурсов (количество виртуальных процессоров, объем оперативной памяти, количество и объем дисковых разделов).</p>
<p>2. Базовые показатели жизнедеятельности виртуальных машин (Health Metrics). Под базовыми показателями жизнедеятельности виртуальных машин предлагается понимать моментальные абсолютные и относительные метрики ресурсов конкретной виртуальной машины кластера, в том числе: − Общие метрики виртуальной машины: доменное имя, количество выделенных виртуальных процессоров, объем выделенной оперативной памяти, количество и объем разделов жестких дисков; − Метрики утилизации (Usage) виртуальных процессоров, оперативной памяти, виртуальной памяти (swap), сетевого траффика, системы ввода-вывода и пространства жестких дисков; − Метрика статуса процесса СУБД, характеризующая состояние выполнения процесса: «запущен» или «остановлен».</p>
<p>3. Показатели функционирования СУБД (Database Server Metrics). К этим показателям предлагается относить метрики, характеризующие состояние системы управления базами данных, в том числе: − Общие метрики СУБД: тип СУБД (реляционная, документная, поколоночная, ключ-значение или графовая), название и версия СУБД, пути к каталогам с данными и логам, флаг «только для чтения»; − Метрики обслуживаемых баз данных: список баз данных, физический размер всех баз данных, общее количество объектов во всех базах данных, общее количество таблиц во всех базах данных; − Метрики репликации: флаг принадлежности сервера СУБД к группе репликации, Идентификатор группы репликации, список имен всех серверов данной группы репликации, количество серверов данной группы репликации; − Метрики шардинга: флаг принадлежности сервера СУБД к группе шардинга, идентификатор группы репликации, список шардов в группе шардинга, общее число шардов в группе шардинга, список шардированных таблиц во всем кластере СУБД, общее число шардированных таблиц в кластере СУБД.</p>
<p>4. Показатели базы данных (Database Metric). К этим показателям предлагается относить метрики, характеризующие состояние конкретной базы данных и её объектов: таблиц, индексов и др., в том числе: − Общие метрики БД: количество таблиц, список таблиц, количество индексов, список индексов, количество экстентов, количество объектов, средний размер объекта, объем данных в базе, объем данных на диске; − Метрики таблиц и индексов: количество записей в таблице, объем записей в таблице, список полей таблицы, первичный ключ, список внешних ключей, количество внешних ключей, объем и тип индекса.</p>
<p>5. Метрики запросов (Query Metrics). Современные СУБД предоставляют средства профилирования и логирования запросов к базе данных. На основе этой информации для каждого выполняемого запроса можно определить: − Общие метрики запросов: общее число запросов за период времени, количество операций выборки, вставки, изменения и удаления за период времени; − Метрики запроса: тип запроса (select, insert, update, delete, изменение схемы), список затрагиваемых таблиц, количество измененных строк, флаг «медленный запрос», используемый индекс.</p>
<p>6. Метрики производительности (Performance Metrics). Метрики производительности являются наиболее важными при оценке качества работы кластера БД. К ним можно отнести: − Метрики подключений: количество доступных подключений, количество активных в настоящий момент подключений, количество операций login/logout в единицы времени; − Метрики пропускной способности (Throughput): объем входящего/ исходящего траффика СУБД за период времени; − Метрики журналирования: количество и объем операций журналирования за единицу времени; − Метрики эффективности индексов: общее число обращений к индексам за единицу времени, число промахов (Miss) при попытке использовать индекс за единицу времени, общее число сбросов индексов; − Метрики отклика (Response): время выполнения операций каждого типа (select, insert, update, delete, изменение схемы), время выполнения каждого из запросов в отдельности.</p>

<h2> 5. События, учитываемые  при масштабировании</h2>
<p>Помимо базовых метрик, система мониторинга должна фиксировать происходящие в кластере события, связанные с изменением состояния кластера СУБД:</p> <p>− События кластера: создана виртуальная машина, удалена виртуальная машина, создана группа шардинга, удалена группа шардинга, создана группа репликации, удалена группа репликации;</p> <p>− События виртуальных машин: виртуальная машина не отвечает;</p> <p>− События СУБД: добавлен новый узел группы репликации, удален узел группы репликации, добавлен новый узел группы шардинга, удален узел группы шардинга, создана база данных, удалена база данных;</p> <p>− События БД: создана таблица, удалена таблица, создан индекс, удален индекс, изменена структура таблицы.</p>

<h2> 6. Назначение интегральных метрик</h2>

<p>В контексте статьи под интегральными метриками понимаются метрики, значение которых вычисляется на основе полученных с помощью системы мониторинга базовых метрик всех описанных выше групп. Целями интегральных метрик являются:</p> <p>− Отслеживание полного отказа серверов;</p> <p>− Оценка увеличения или снижения нагрузки на кластер БД и/или его участки - группы репликации и группы шардинга;</p> <p>− Оценка снижения производительности кластера БД и/или его участков – групп репликации и групп шардинга;</p> <p>− Определение узких мест кластера, повлиявших на снижение производительности;</p> <p>− Определение целесообразности применения одного из методов масштабирования: o Определение участка, нуждающегося в вертикальном масштабировании; o Определение участка, нуждающегося в дополнительной реплике или уменьшении числа существующих реплик; o Определение участка, нуждающегося в дополнительном шарде или уменьшении числа существующих шардов; o Определение оптимального ключа шардинга в случае необходимости шардинга;</p> <p>− Оценка повышения производительности кластера за счет управляющего воздействия системы динамического масштабирования;</p> <p>− Прогнозирование изменений в работе кластера исходя из полученных ранее данных.</p> <p>Таким образом, интегральные метрики должны наиболее полно отражать состояние кластера БД и происходящие в нем процессы, в том числе, в динамике. Для достижения этих целей в настоящий момент предлагается выделение интегральных метрик, отражающих:</p> <p>− Средние значения базовых показателей жизнедеятельности кластера БД и входящих в его состав групп шардинга и репликации;</p> <p>− Динамику изменения средних значений базовых показателей жизнедеятельности кластера БД и входящих в его состав групп шардинга и репликации за период времени;</p> <p>− Динамику изменения производительности каждой конкретной виртуальной машины кластера БД;</p> <p>− Динамику абсолютного и относительного приращения объемов базы данных;</p> <p>− Динамику вертикального и горизонтального, абсолютного и относительного приращения объемов объектов базы данных;</p> <p>− Динамику интенсивности обращений к базе данных;</p> <p>− Динамику интенсивности конкретных запросов к базе данных;</p> <p>− Динамику показателей производительности кластера СУБД.</p>

<h2>7. Направления для продолжения исследований</h2>
<p>В настоящей статье были проанализированы основные методы масштабирования баз данных и их поддержка на уровне популярных реляционных СУБД и NoSQL решений с различными моделями данных: документо-ориентированной, ключ-значение, поколоночной, графовой. Оценены возможности современных облачных решений и приведена модель организации динамического масштабирования. Выделены группы базовых метрик, характеризующих параметры функционирования БД и технических средств, а также определены цели и группы интегральных метрик, необходимых для реализации адаптивных алгоритмов динамического масштабирования баз данных.</p> <p>Для продолжения исследований алгоритмов динамического разделения данных на уровне ресурсов (шардинга) и репликации для организации автоматического масштабирования мультитенантной базы данных в облачной инфраструктуре предполагается выделить следующие направления:</p> <p>− Детализация и формализация интегральных метрик функционирования кластера мультитенантных баз данных в облачной инфраструктуре;</p> <p>− Оценка возможности использования указанных показателей в алгоритмах для организации динамического масштабирования мультитенантных баз данных в облачной инфраструктуре.</p>

      <h2>Литература</h2>
<ol>
  <li>Idziorek J. Discrete event simulation model for analysis of horizontal scaling in the cloud computing model / Proceedings of the 2010 Winter Simulation Conference. URL: http://www.informs-sim.org/wsc10papers/278.pdf (дата обращения: 07.11.2013).</li>
  <li>Рогожин Д. Средства масштабирования в облачной инфраструктуре / III научно-практическая конференция молодых ученых “Инновационное развитие российской экономики”. 10 декабря 2012г. / Сборник научных трудов. – М.: МЭСИ, 2012. – Предм. указ.: с. 140 – 148.</li>
  <li>Дэн Голотюк. Шардинг, партиционирование, репликация - зачем и когда? / URL: http://highload.com.ua/index.php/2009/05/06/шардинг-партиционирование-репликац/ (дата обращения: 07.11.2013)</li>
  <li>Burckhardt S., Leijen D. Eventually Consistent Transactions / URL: http://research.microsoft.com/pubs/158085/ecr-esop2012.pdf (дата обращения: 07.11.2013)</li>
  <li>Косьмина Я.О. Репликация. Master-slave, кластер и прочее. / URL: http://freehabr.ru/blog/database/1119.html (дата обращения: 07.11.2013).</li>
  <li>Oracle® Database VLDB and Partitioning Guide. Part2: Partitioning Concepts / URL: http://docs.oracle.com/cd/B28359_01/server.111/b32024/partition.htm (дата обращения: 07.11.2013)</li>
  <li>SQL Server 2012. Create Partitioned Tables and Indexes / URL: http://technet.microsoft.com/en-us/library/ms188730.aspx (дата обращения: 07.11.2013)</li>
  <li>Ломакин А. Apache Cassandra, part 1 – principles, data model. Презентация Exigen Services 28 июня 2011. / URL: http://www.slideshare.net/lomakin.andrey/apache-cassandra-part-1-principles-data-model (дата обращения: 07.11.2013)</li>
  <li>Распределённая хеш-таблица. Материал из Википедии — свободной энциклопедии / URL: http://ru.wikipedia.org/wiki/Распределённая_хеш-таблица (дата обращения: 07.11.2013)</li>
  <li>Tsoumakos D., Konstantinou I., Boumpouka C. On the Elasticity of NoSQL Databases over Cloud Management Platforms. / Proceeding CIKM ‘11 Proceedings of the 20th ACM international conference on Information and knowledge management, Pages 2385-2388, ISBN: 978-1-4503-0717-8, / URL: http://www.cslab.ntua.gr/~ikons/elastic_nosql.pdf (дата обращения: 07.11.2013)</li>
  <li>CouchDB. The Definitive Guide. Clustering. / URL: http://guide.couchdb.org/draft/clustering.html (дата обращения: 07.11.2013)</li>
  <li>Sharding and MongoDB. MongoDB Documentation Project. November 01, 2013 / URL: http://docs.mongodb.org/v2.4/MongoDB-shardingguide.pdf (дата обращения: 07.11.2013)</li>
  <li>MSDN. Scaling Out SQL Server. / Microsoft Corporation, April 2012. / URL: http://msdn.microsoft.com/en-us/library/aa479364.aspx (дата обращения: 07.11.2013)</li>
  <li>Васильев А.Ю. Работа с Postgresql: настройка, масштабирование, - Справочное пособие, 2010. / URL: http://postgresql.ru.net/pgtune/postgresql.html#SECTION00600000000000000000 (дата обращения: 07.11.2013) / Глава 5. Шардинг.</li>
  <li>Partitioning: how to split data among multiple Redis instances. / URL: http://redis.io/topics/partitioning (дата обращения: 07.11.2013)</li>
  <li>Oracle Real Application Clusters (RAC). An Oracle White Paper, June 2013 / URL: http://www.oracle.com/technetwork/products/clustering/rac-wp-12c-1896129.pdf?ssSourceSiteId=ocomen (дата обращения: 07.11.2013)</li>
  <li>Seth Gilbert, Nancy Lynch. Brewer’s Conjecture and the Feasibility of Consistent, Available, Partition Tolerant Web Services. - Laboratory for Computer Science, Massachusetts Institute of Technology, Cambridge, MA 02139. URL: http://people.csail.mit.edu/sethg/pubs/BrewersConjecture-SigAct.pdf (дата обращения: 07.11.2013)</li>
  <li>How To Use Cache Sharding: Scale Out Neo4j / FromDev: A Technology Blog About Programming, Web Development, Tips, Tutorials and Books Recommendation for Developers / 14.10.2013 / URL: http://www.fromdev.com/2013/10/neo4j-cache-sharding-scale-out.html (дата обращения: 07.11.2013)</li>
  <li>Guide to Scaling Web Databases with MySQL Cluster. Accelerating Innovation on the Web and in the Cloud, A MySQL® White Paper, June 2013 / URL: http://www.mysql.com/why-mysql/white-papers/guide-to-scaling-web-databases-with-mysql-cluster/ (дата обращения: 07.11.2013)</li>
  <li>Euca2ools. Сайт проекта Eucalyptus / URL: http://www.eucalyptus.com/download/euca2ools (дата обращения: 07.11.2013)</li>
  <li>Oracle® Enterprise Manager. System Monitoring Plug-in Metric Reference Manual for Non-Oracle Database Management, Release 12 (12.0), B28748-11, November 2010. / URL: http://docs.oracle.com/cd/E11857_01/em.111/b28748.pdf (дата обращения: 07.11.2013)</li>
  <li>Mikoomi. Developing useful monitoring plugins for Zabbix. Chapter 3: MongoDB Plugin. May 5, 2011. / URL: https://code.google.com/p/mikoomi/wiki/03 (дата обращения: 07.11.2013)</li>
</ol>
      
    </div>
  </div>
</main>

<!-- Подвал -->
<footer class="footer lynch-footer">
  <div class="container">
    <nav class="bottom-menu">
      <a href="../diss/index.html">Реферат</a>
      <a href="../science.html">Научные труды</a>
      <a href="../ind/index.html">Индивидуальный раздел</a>
    </nav>
  </div>
</footer>

<!-- Кнопка наверх -->
<button id="toTop">↑</button>

<script>
  const toTop = document.getElementById("toTop");
  window.addEventListener("scroll", () => {
    if (window.scrollY > 300) {
      toTop.classList.add("show");
    } else {
      toTop.classList.remove("show");
    }
  });
  toTop.addEventListener("click", () => {
    window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>
</body>
</html>